<!DOCTYPE html>
<html>
<body>

  <h2 style="color:red;">I am red</h2>
  <h2 style="color:blue;">I am blue</h2>
  <div id="content"></div>

  <script type="text/javascript">
  var content = document.getElementById('content');
  var socket = new WebSocket('ws://localhost:3000');
  function makeString (num) {
    var string = '';
    for (var i = 0; i < num; i++) {
      string += 'a';
    };
    return string;
  }
  socket.onopen = function () {
    console.log('message')
    socket.send(makeString(47000));
  };

  socket.onmessage = function (message) {
    console.log('hi');
    console.log(message.data)
    content.innerHTML += message.data +'<br />';
    // socket.close(1000);
  };

  socket.onerror = function (error) {
    console.log('WebSocket error: ' + error);
  };

  socket.onclose = function (close) {
    console.log(close);
    console.log('WebSocket close: ' + close);
  };

  </script>
</body>
</html>
